#:kivy 2.1.0

BoxLayout:
    orientation: 'vertical'

    Label:
        text: app.gps_location

    Label:
        text: app.gps_status
    
    Button:
        text: 'Initialize base'
        on_press: app.initialize_base()
    
    Button:
        text: 'Set Origin'
        on_press: app.set_origin()
        
    BoxLayout:
        size_hint_y: None
        height: '48dp'
        padding: '4dp'
        Label:
            text: 'Rec'
        BoxLayout:
            Button:
                text: 'Start'
                on_press: app.post_to_base_api('api/start_recording')
            Button:
                text: 'Stop'
                on_press: raise NotImplementedError
    
    BoxLayout:
        size_hint_y: None
        height: '48dp'
        padding: '4dp'
        Label:
            text: 'Zoom'
        Button:
            text: 'In'
            on_press: app.post_to_base_api('api/zoom_in')
        Button:
            text: 'Out'
            on_press: app.post_to_base_api('api/zoom_out')
            
    BoxLayout:
        size_hint_y: None
        height: '48dp'
        padding: '4dp'
        Label:
            text: 'Xmit to'
        Spinner:
            text: 'Base'
            values: 'Base','Firebase','None'
            on_text:
                app.set_dest_addr(self.text)
                print(f'sending to {app.dest_addr}')
        ToggleButton:
            text: 'Start' if self.state == 'normal' else 'Stop'
            on_state:
                app.start(1000, 0) if self.state == 'down' else \
                app.stop()